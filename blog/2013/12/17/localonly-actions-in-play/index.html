<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, user-scalable=no" name="viewport"><meta content="LocalOnly Actions in Play!" name="description"><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Merriweather:400,700|Open+Sans:400,700" rel="stylesheet" type="text/css"><link href="/bundles/84cd5d4454d9/styles.css" rel="stylesheet" /><title>LocalOnly Actions in Play!</title></head><body><div class="row"><blockquote class="warning">This post is over 6 months old.  Some details,
       especially technical, may have changed.</blockquote><div itemscope="" itemtype="http://schema.org/Article"><h1 itemprop="name">LocalOnly Actions in Play!</h1><div class="post" itemprop="articleBody"><p>A <code>LocalOnly</code> action in Play! is essentially an action on a controller that can only be called from the machine this it resides on. This is useful for restricting some endpoints (perhaps ops focused or database seeding <em>tasks</em>) from being called by all and sundry.</p>
<pre class="highlight"><code class="scala"><span class="k">def</span> <span class="nc">LocalOnlyAction</span><span class="o">(</span><span class="n">f</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">AnyContent</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="nc">Result</span><span class="o">)</span><span class="k">:</span> <span class="kt">Action</span><span class="o">[</span><span class="kt">AnyContent</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
  <span class="nc">Action</span> <span class="o">{</span> <span class="n">request</span> <span class="k">=&gt;</span>
    <span class="n">request</span><span class="o">.</span><span class="n">remoteAddress</span> <span class="k">match</span> <span class="o">{</span>
      <span class="k">case</span> <span class="s">"127.0.0.1"</span> <span class="o">|</span> <span class="s">"::0"</span> <span class="k">=&gt;</span> <span class="n">f</span><span class="o">(</span><span class="n">request</span><span class="o">)</span>
      <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="nc">NotFound</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre><p>You can use this Action wrapper like so,</p>
<pre class="highlight"><code class="scala"><span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">LocalOnlyAction</span> <span class="o">{</span> <span class="n">request</span> <span class="k">=&gt;</span>
  <span class="nc">Ok</span><span class="o">(</span><span class="s">"Local Only Action Executed"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre><p>This can be useful in the early stages of a project when your design is constantly influx and you need to perform actions on running systems. As your system grows this is perhaps a less favourable appraoch and you should consider moving these sort of tasks out of the application entriely.</p></div><a class="twitter" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fyobriefca.se%2Fblog%2F2013%2F12%2F17%2Flocalonly-actions-in-play%2F&amp;text=LocalOnly%20Actions%20in%20Play%21&amp;via=kouphax" itemprop="discussionUrl" target="_blank">Tweet This</a><div class="dater"><time datetime="17-12-2013" itemprop="datePublished">December 17, 2013</time></div><div class="categories">Published in <a href="/categories/scala/">Scala</a> on December 17, 2013</div></div></div><div class="homer"><a href="/"><i class="icon-briefcase" style="font-size:32px;"></i></a></div></body></html>
