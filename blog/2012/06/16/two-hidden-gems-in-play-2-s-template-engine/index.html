<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, user-scalable=no" name="viewport"><meta content="Two Hidden Gems in Play 2&apos;s Template Engine" name="description"><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Merriweather:400,700|Open+Sans:400,700" rel="stylesheet" type="text/css"><link href="/bundles/84cd5d4454d9/styles.css" rel="stylesheet" /><title>Two Hidden Gems in Play 2's Template Engine</title></head><body><div class="row"><blockquote class="warning">This post is over 6 months old.  Some details,
       especially technical, may have changed.</blockquote><div itemscope="" itemtype="http://schema.org/Article"><h1 itemprop="name">Two Hidden Gems in Play 2's Template Engine</h1><div class="post" itemprop="articleBody"><p>Poking around some <a href="http://www.playframework.org/">Play 2</a> <a href="http://www.playframework.org/documentation/2.0.1/Samples">samples</a> today I came across some little bits of sugar. I haven't seen mention of them in other places (they must be well hidden) but they are two very common things I've implemented in less elegant ways in the past. That was reason enough for me to throw a quick post up about them.</p><p>Prepare to have your minds blown. Well not blown - gently nudged probably.</p><h2>String.when</h2><p><code>"somestring".when(predicate: =&gt; Boolean)</code> allows you conditionally spit out the value of the string it is called on (otherwise returning and empty string).</p>
<pre class="highlight"><code class="scala "><span class="s">"returned_string"</span><span class="o">.</span><span class="n">when</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>      <span class="c1">// returns "returned_string"</span>
<span class="s">"nonreturned_string"</span><span class="o">.</span><span class="n">when</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>  <span class="c1">// returns "" (empty string)</span>
</code></pre><p>So in the context of views what is this good for? Lots of things but the most clever use for this little function is conditional css. Imagine you've got a block of HTML that represents a message area. These messages can be either good or bad and so we need to add the css class of <code>message-bad</code> depending on an argument passed in to the view. A very quick and dirty way of handling this would be as such</p>
<pre class="highlight"><code class="scala "><span class="o">@(</span><span class="n">message</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">successful</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span>

<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="-Symbol">'message</span> <span class="nd">@if</span><span class="o">(!</span><span class="n">successful</span><span class="o">){</span> <span class="s">"message-bad"</span> <span class="o">}</span><span class="err">'</span><span class="o">&gt;</span>
  <span class="nd">@message</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</code></pre><p>Grand, fine. It's a bit noisy but it works. <code>when()</code> makes this a bit neater IMHO.</p>
<pre class="highlight"><code class="scala "><span class="o">@(</span><span class="n">message</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">successful</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span>

<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="-Symbol">'message</span> <span class="o">@(</span><span class="s">"message-bad"</span><span class="o">.</span><span class="n">when</span><span class="o">(!</span><span class="n">successful</span><span class="o">))</span><span class="err">'</span><span class="o">&gt;</span>
  <span class="nd">@message</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</code></pre><p>Yep the line is the same length but it looks more like a single block of conditional code, it flows much better and, I think at least, is much more readable.</p><h2>Date.format("&lt;date-format&gt;")</h2><p><code>new java.util.Date().format(pattern: String)</code> allows you to specify how a date should be formatted in the rendered HTML. It's essentially shorthand for the noise-fest that is <code>SimpleDateFormat</code></p>
<pre class="highlight"><code class="scala "><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="n">pattern</span><span class="o">).</span><span class="n">format</span><span class="o">(</span><span class="n">date</span><span class="o">)</span>
</code></pre><p>In the past I've added transient properties to models for displaying the date, or written my own methods on those models. Both of those approaches should have had me taken out into a field and shot. <code>format</code> makes things much more straightforward,</p>
<pre class="highlight"><code class="scala "><span class="o">@(</span><span class="n">importantDate</span><span class="k">:</span> <span class="kt">java.util.Date</span><span class="o">)</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
  <span class="nd">@importantDate</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="s">"dd-MM-yyyy"</span><span class="o">)</span>
<span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</code></pre><p>And the output will be along the lines of "29-01-2013" or whatever the date was.</p><p>OK so neither of these are ground breaking or earth shattering (wait they mean the same thing really dont they???) but they are neat to enough to warrant a shout-out here. Anyone else have any little nuggets in Play 2 they want to share?</p></div><a class="twitter" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fyobriefca.se%2Fblog%2F2012%2F06%2F16%2Ftwo-hidden-gems-in-play-2-s-template-engine%2F&amp;text=Two%20Hidden%20Gems%20in%20Play%202%27s%20Template%20Engine&amp;via=kouphax" itemprop="discussionUrl" target="_blank">Tweet This</a><div class="dater"><time datetime="16-06-2012" itemprop="datePublished">June 16, 2012</time></div><div class="categories">Published in <a href="/categories/scala/">Scala</a> on June 16, 2012</div></div></div><div class="homer"><a href="/"><i class="icon-briefcase" style="font-size:32px;"></i></a></div></body></html>
