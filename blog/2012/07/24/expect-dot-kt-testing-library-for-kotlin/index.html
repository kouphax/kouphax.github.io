<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, user-scalable=no" name="viewport"><meta content="expect.kt - Testing Library for Kotlin" name="description"><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Merriweather:400,700|Open+Sans:400,700" rel="stylesheet" type="text/css"><link href="/bundles/84cd5d4454d9/styles.css" rel="stylesheet" /><title>expect.kt - Testing Library for Kotlin</title></head><body><div class="row"><blockquote class="warning">This post is over 6 months old.  Some details,
       especially technical, may have changed.</blockquote><div itemscope="" itemtype="http://schema.org/Article"><h1 itemprop="name">expect.kt - Testing Library for Kotlin</h1><div class="post" itemprop="articleBody"><p>In a bid to delve into the <a href="http://kotlin.jetbrains.org/">language</a> a bit further than a rake of tiny console apps I decided to do something "real" with Kotlin. With that in mind - welcome <a href="https://github.com/kouphax/expect.kt">expect.kt</a>.</p><p>It started purely as a learning venture but I think there is a certain usefulness in the library so its probably worth sharing :). Now it's worth noting that kotlin already has a number of testing statements that you can achieve a lot of this stuff with - this library gives you a few things over and above these statements </p>
<ol>
  <li>Alternative syntax. Testing is quite a personal thing and some people like to write things in different ways.</li>
  <li>Descriptive assertions. Some would say <code>expect(2).toBePositive()</code> reads better than <code>assertTrue(2 &gt; 0)</code> or <code>expect(2 &gt; 0) { true }</code>. Again its all about taste, and variety is the spice of life.</li>
  <li>Chained assertions. See later</li>
</ol><p>Rather than some campaign to replace the inbuilt expectations and assertions this library intended to complement them.</p><h2>So what is expect.kt?</h2><p>Expect.kt is a set of (growing) assertions/expectations that you can use in your kotlin based tests. It gives you a number of ways to assert your expectations and gives you quite descriptive methods in which to do it.</p><h3>Expect Syntax</h3><p>The expect syntax is the default way to assert things,</p>
<pre class="highlight"><code class="java "><span class="kn">package</span> <span class="n">tests</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span> <span class="n">as</span> <span class="n">test</span>
<span class="kn">import</span> <span class="nn">kotlin.expectations.*</span>

<span class="kd">class</span> <span class="nc">StringExpectationTests</span> <span class="o">{</span>
    <span class="n">test</span> <span class="n">fun</span> <span class="nf">testHelloWorld</span> <span class="o">()</span> <span class="o">{</span>
		<span class="n">expect</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">).</span><span class="na">toStartWith</span><span class="o">(</span><span class="s">"Hell"</span><span class="o">)</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre><p>Most of that is boilerplate JUnit testy things but the key line is</p>
<pre class="highlight"><code class="java "><span class="n">expect</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">).</span><span class="na">toStartWith</span><span class="o">(</span><span class="s">"Hell"</span><span class="o">)</span>
</code></pre><p>Reads quite nicely IMHO.</p><h3>Should Syntax</h3><p>The should syntax offers a more fluent syntax if you want to call it that, if we wanted to write the same test above using the should syntax we could do this,</p>
<pre class="highlight"><code class="java "><span class="s">"Hello World"</span><span class="o">.</span><span class="na">should</span><span class="o">.</span><span class="na">startWith</span><span class="o">(</span><span class="s">"Hell"</span><span class="o">)</span>
</code></pre><p>So rather than wrap your target with an expect you get and extension function to fluently assert it.</p><h3>Chaining</h3><p>Sometimes making a single assertion on a result isn't enough and rather than write <code>assertTrue(...)</code> multiple times you can use extpect.kt's chaining support.</p>
<pre class="highlight"><code class="java "><span class="n">expect</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">).</span><span class="na">toStartWith</span><span class="o">(</span><span class="s">"Hell"</span><span class="o">).</span><span class="na">and</span><span class="o">.</span><span class="na">toEndWith</span><span class="o">(</span><span class="s">"rld"</span><span class="o">)</span>
</code></pre><p>Or, with the should syntax,</p>
<pre class="highlight"><code class="java "><span class="s">"Hello World"</span><span class="o">.</span><span class="na">should</span><span class="o">.</span><span class="na">startWith</span><span class="o">(</span><span class="s">"Hell"</span><span class="o">).</span><span class="na">and</span><span class="o">.</span><span class="na">endWith</span><span class="o">(</span><span class="s">"rld"</span><span class="o">)</span>
</code></pre><p>It's a bit more readable than expect after expect, right?</p><p>So thats it for now - there are a number of assertions implemented already on the useful types (Strings, Ints, Doubles, Dates, Booleans for example) and there are more planned on the way. Currently you'll be wanting to build from source (or copy/paste what you need).</p><p>Finally - A shout out to .NETs <a href="http://fluentassertions.codeplex.com/">FluentAssertions</a> where a lot of the assertions found their origin!</p><p><a href="https://github.com/kouphax/expect.kt">expect.kt</a>.</p></div><a class="twitter" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fyobriefca.se%2Fblog%2F2012%2F07%2F24%2Fexpect-dot-kt-testing-library-for-kotlin%2F&amp;text=expect.kt%20-%20Testing%20Library%20for%20Kotlin&amp;via=kouphax" itemprop="discussionUrl" target="_blank">Tweet This</a><div class="dater"><time datetime="24-07-2012" itemprop="datePublished">July 24, 2012</time></div><div class="categories">Published in <a href="/categories/kotlin/">Kotlin</a> on July 24, 2012</div></div></div><div class="homer"><a href="/"><i class="icon-briefcase" style="font-size:32px;"></i></a></div></body></html>
